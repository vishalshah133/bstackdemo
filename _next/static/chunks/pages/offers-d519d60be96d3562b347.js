_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{apEV:function(e,t,n){"use strict";n.r(t);var i=n("8Kt/"),a=n.n(i),c=n("M8b6"),r=n("U1il"),s=n("q1tI"),o=n("z/if"),l=n.n(o),d=n("nOHt"),j=n.n(d),f=n("eAqC"),x=(n("EViR"),n("nKUr"));t.default=function(){var e=Object(s.useState)(""),t=e[0],i=e[1],o=Object(s.useState)([]),d=o[0],u=o[1],b=l.a.session.get("username");return Object(s.useEffect)((function(){return b?"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){i("");var t=Math.ceil(e.coords.latitude),n=Math.ceil(e.coords.longitude);f.a.get("/api/offers",{params:{userName:b,latitude:t,longitude:n}}).then((function(e){var t=e.data.offersData;u(t)})).catch((function(e){i("Sorry we do not have any promotional offers in your city.")}))}),(function(e){i("Please enable Geolocation in your browser.")})):i("Geolocation is not available in your browser."):j.a.replace({pathname:"/signin",query:{offers:"true"}}),function(){return u([])}}),[]),b?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(a.a,{children:[Object(x.jsx)("title",{children:"StackDemo"}),Object(x.jsx)("link",{rel:"icon",href:"/favicon.svg",sizes:"any",type:"image/svg+xml"}),Object(x.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),Object(x.jsx)(c.a,{}),Object(x.jsx)("main",{className:"fit",children:Object(x.jsx)("div",{className:"mx-auto max-w-8xl px-6",children:Object(x.jsx)("div",{className:"flex-1 p-10 flex flex-col justify-center items-center",children:t?Object(x.jsx)("div",{className:"pt-6 text-2xl font-bold tracking-wide text-center text-red-50",children:t}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"p-6 text-2xl tracking-wide text-center text-red-50",children:"We've promotional offers in your location."}),Object(x.jsx)("div",{className:"pt-6 text-2xl font-bold tracking-wide text-center text-red-50 offers-listing justify-center",children:Object.keys(d).map((function(e){return Object(x.jsxs)("div",{id:e,className:"offer",children:[Object(x.jsx)("img",{style:{height:"150px"},alt:e,src:n("/DQU")("./".concat(d[e].imageId))}),Object(x.jsx)("div",{className:"offer-title",children:d[e].title})]},e)}))})]})})})}),Object(x.jsx)(r.a,{})]}):Object(x.jsx)(x.Fragment,{})}},ySxj:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/offers",function(){return n("apEV")}])}},[["ySxj",0,1,5,2,4,6,3]]]);